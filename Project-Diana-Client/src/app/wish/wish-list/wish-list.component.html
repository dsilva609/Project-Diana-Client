<div class="d-flex justify-content-between">
  <h2>Wish List</h2>

  <div class="btn btn-primary btn-lg fa-2x" routerLink="create">
    <fa-icon [icon]="['fas', 'plus']"></fa-icon>
  </div>
</div>

<br />

<div *ngIf="albumWishes?.length">
  <h3>Albums</h3>
  <table
    *ngFor="let list of albumWishes"
    class="table table-striped table-hover"
  >
    <thead>
      <tr>
        <th>#</th>
        <th>Title</th>
        <th>Owned</th>
        <th>Date Added</th>
        <th>Notes</th>
        <th></th>
      </tr>
      <tr>
        {{
          list.category
        }}
      </tr>
    </thead>

    <tbody>
      <tr
        *ngFor="let wish of list.wishes; let i = index"
        (click)="viewWish(wish.id)"
      >
        <td>{{ i + 1 }}</td>
        <td>
          {{ wish.title }}
        </td>

        <td>
          <app-wish-owned
            class="mr-2"
            [isOwned]="wish.owned"
            [wishId]="wish.id"
          ></app-wish-owned>
          <fa-icon
            [icon]="['fas', 'search']"
            (click)="searchForWish(wish.id, '/album/search', wish.title)"
          ></fa-icon>
        </td>
        <td>{{ wish.dateAdded | date }}</td>
        <td>{{ wish.notes }}</td>
        <td>
          <fa-icon
            [icon]="['fas', 'trash-alt']"
            (click)="openConfirmDeleteModal($event, wish.id)"
          ></fa-icon>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<br />

<div *ngIf="bookWishes?.length">
  <h3>Books</h3>
  <table
    *ngFor="let list of bookWishes"
    class="table table-striped table-hover"
  >
    <thead>
      <tr>
        <th>#</th>
        <th>Title</th>
        <th>Owned</th>
        <th>Date Added</th>
        <th>Notes</th>
        <th></th>
      </tr>
      <tr>
        {{
          list.category
        }}
      </tr>
    </thead>

    <tbody>
      <tr
        *ngFor="let wish of list.wishes; let i = index"
        (click)="viewWish(wish.id)"
      >
        <td>{{ i + 1 }}</td>
        <td>
          {{ wish.title }}
        </td>

        <td>
          <app-wish-owned
            class="mr-2"
            [isOwned]="wish.owned"
            [wishId]="wish.id"
          ></app-wish-owned>
          <fa-icon
            [icon]="['fas', 'search']"
            (click)="searchForWish(wish.id, '/book/search', wish.title)"
          ></fa-icon>
        </td>
        <td>{{ wish.dateAdded | date }}</td>
        <td>{{ wish.notes }}</td>
        <td>
          <fa-icon
            [icon]="['fas', 'trash-alt']"
            (click)="openConfirmDeleteModal($event, wish.id)"
          ></fa-icon>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<br />

<div *ngIf="gameWishes?.length">
  <h3>Games</h3>
  <table
    *ngFor="let list of gameWishes"
    class="table table-striped table-hover"
  >
    <thead>
      <tr>
        <th>#</th>
        <th>Title</th>
        <th>Owned</th>
        <th>Date Added</th>
        <th>Notes</th>
        <th></th>
      </tr>
      <tr>
        {{
          list.category
        }}
      </tr>
    </thead>

    <tbody>
      <tr
        *ngFor="let wish of list.wishes; let i = index"
        (click)="viewWish(wish.id)"
      >
        <td>{{ i + 1 }}</td>
        <td>
          {{ wish.title }}
        </td>

        <td>
          <app-wish-owned
            [isOwned]="wish.owned"
            [wishId]="wish.id"
          ></app-wish-owned>
        </td>
        <td>{{ wish.dateAdded | date }}</td>
        <td>{{ wish.notes }}</td>
        <td>
          <fa-icon
            [icon]="['fas', 'trash-alt']"
            (click)="openConfirmDeleteModal($event, wish.id)"
          ></fa-icon>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<br />

<div *ngIf="movieWishes?.length">
  <h3>Movies.Shows</h3>
  <table
    *ngFor="let list of movieWishes"
    class="table table-striped table-hover"
  >
    <thead>
      <tr>
        <th>#</th>
        <th>Title</th>
        <th>Owned</th>
        <th>Date Added</th>
        <th>Notes</th>
        <th></th>
      </tr>
      <tr>
        {{
          list.category
        }}
      </tr>
    </thead>

    <tbody>
      <tr
        *ngFor="let wish of list.wishes; let i = index"
        (click)="viewWish(wish.id)"
      >
        <td>{{ i + 1 }}</td>
        <td>
          {{ wish.title }}
        </td>

        <td>
          <app-wish-owned
            [isOwned]="wish.owned"
            [wishId]="wish.id"
          ></app-wish-owned>
        </td>
        <td>{{ wish.dateAdded | date }}</td>
        <td>{{ wish.notes }}</td>
        <td>
          <fa-icon
            [icon]="['fas', 'trash-alt']"
            (click)="openConfirmDeleteModal($event, wish.id)"
          ></fa-icon>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<ng-template #confirmDeleteModal let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-title">Delete Wish</h4>
  </div>
  <div class="modal-body">Are you sure you want to delete this wish?</div>
  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-outline-secondary"
      (click)="cancelDelete()"
    >
      No
    </button>
    <button
      type="button"
      ngbAutofocus
      class="btn btn-danger"
      (click)="deleteWish()"
    >
      Delete
    </button>
  </div>
</ng-template>
